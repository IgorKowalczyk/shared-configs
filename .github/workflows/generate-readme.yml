name: Generate README
on: [push, pull_request]

jobs:
  generate-readme:
    name: Generate README
    runs-on: ubuntu-latest
    env:
      BODY: ${{ github.event.head_commit.message }}
    permissions:
      contents: write
    strategy:
      fail-fast: false
      matrix:
        node: ["lts/*"]
    steps:
      - name: ğŸ§± Checkout repository
        uses: actions/checkout@v5
      - name: ğŸ”© Setup PNPM
        uses: pnpm/action-setup@v4
        with:
          standalone: true
      - name: ğŸ”© Setup Node ${{ matrix.node }}
        uses: actions/setup-node@v6
        with:
          node-version: ${{ matrix.node }}
          cache: "pnpm"
      - name: ğŸš€ Install dependencies
        run: pnpm install
      - name: ğŸš€ Generate README
        run: pnpm run generate-docs
      - name: ğŸ“¤ Commit changes
        uses: stefanzweifel/git-auto-commit-action@v7
        with:
          commit_message: "${{ env.BODY }} | Generated README.md docs"
          push_options: --force
